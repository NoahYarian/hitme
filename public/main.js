"use strict";

var API = "http://deckofcardsapi.com/api/",
    $dealer1 = $(".dealer1"),
    $dealer2 = $(".dealer2"),
    $dealer3 = $(".dealer3"),
    $dealer4 = $(".dealer4"),
    $dealer5 = $(".dealer5"),
    $dealer6 = $(".dealer6"),
    $dealer7 = $(".dealer7"),
    $dealer8 = $(".dealer8"),
    $dealer9 = $(".dealer9"),
    $dealer10 = $(".dealer10"),
    $dealer11 = $(".dealer11"),
    $player1 = $(".player1"),
    $player2 = $(".player2"),
    $player3 = $(".player3"),
    $player4 = $(".player4"),
    $player5 = $(".player5"),
    $player6 = $(".player6"),
    $player7 = $(".player7"),
    $player8 = $(".player8"),
    $player9 = $(".player9"),
    $player10 = $(".player10"),
    $player11 = $(".player11"),
    deckId,
    $getDeck = $(".getDeck"),
    $dealCards = $(".dealCards"),
    $hit = $(".hit"),
    $stay = $(".stay"),
    dealerHand = [],
    playerHand = [];

var $dealer = $(".dealer");
var $player = $(".player");

var dealer = [];
var player = [];
var $dealerCard = $(".dealerCard");
var $playerCard = $(".playerCard");

$getDeck.click(sixDecks);
$dealCards.click(dealFour);
//$hit.click(hit);

function sixDecks() {
  var shuffleURL = API + "shuffle/?deck_count=6";
  console.log("shuffleURL = " + shuffleURL);
  getJSON(shuffleURL, function (data) {
    deckId = data.deck_id;
    console.log(deckId);
  });
};

function dealFour() {
  var draw4URL = API + "/draw/" + deckId + "/?count=4";
  console.log("draw4URL = " + draw4URL);
  getJSON(draw4URL, function (data) {
    $dealer1.attr("src", "http://behance.vo.llnwd.net/profiles/56117/projects/5740089/e86ace60c0d4931bd3a89abe50b4d267.jpg");
    $player1.attr("src", data.cards[1].image);
    $dealer2.attr("src", data.cards[2].image);
    $player2.attr("src", data.cards[3].image);
    dealerHand.push(data.cards[0].value + " " + data.cards[0].suit);
    playerHand.push(data.cards[1].value + " " + data.cards[1].suit);
    dealerHand.push(data.cards[2].value + " " + data.cards[2].suit);
    playerHand.push(data.cards[3].value + " " + data.cards[3].suit);
  });
}

//function hit() {
//var hitURL = API + "/draw/" + deckId + "/?count=2";
//getJSON(hitURL, function(data) {
////var playerHtml = "  ("src", data.cards[0].image);
//$dealer3.attr("src", data.cards[1].image);
//playerHand.push(data.cards[0].value + " " + data.cards[0].suit);
//dealerHand.push(data.cards[1].value + " " + data.cards[1].suit);
//});
//}

$dealerCard.click(dealerCard);
$playerCard.click(playerCard);

function dealerCard() {
  var cardURL = API + "/draw/" + deckId + "/?count=1";
  getJSON(cardURL, function (data) {
    var html = "<img class='cardImage' src='" + data.cards[0].image + "'>";
    $dealer.append(html);
    dealerHand.push(convertCard(data.cards[0].value));
  });
}

function playerCard() {
  var cardURL = API + "/draw/" + deckId + "/?count=1";
  getJSON(cardURL, function (data) {
    var html = "<img class='cardImage' src='" + data.cards[0].image + "'>";
    $player.append(html);
    playerHand.push(convertCard(data.cards[0].value));
  });
}

function convertCard(value) {
  if (value === "ACE") {
    return 1;
  } else if (isNaN(value)) {
    return 10;
  } else {
    return value;
  }
}

// commented out until i figure out passing event handlers functions with arguments
//function card(person){
//var cardURL = API + "/draw/" + deckId + "/?count=1";
//var $person = ( person === 'dealer' ) ? $('.dealer') : $('.player');

//getJSON(cardURL, function(data) {
//var html = "<img class='cardImage' src='" + data.cards[0].image + "'>";
//$person.append(html);
//[person].push(data.cards[0].value);
//});
//}

// Scott's cross-origin fix
function getJSON(url, cb) {
  var JSONP_PROXY = "https://jsonp.afeld.me/?url=";
  // THIS WILL ADD THE CROSS ORIGIN HEADERS
  var request = new XMLHttpRequest();
  request.open("GET", JSONP_PROXY + url);
  request.onload = function () {
    if (request.status >= 200 && request.status < 400) {
      cb(JSON.parse(request.responseText));
    }
  };
  request.send();
}
//# sourceMappingURL=data:application/json;base64,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TyxDQUFDLENBQUM7R0FDVixNQUFNLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFO0FBQ3ZCLFdBQU8sRUFBRSxDQUFDO0dBQ1gsTUFBTTtBQUNMLFdBQU8sS0FBSyxDQUFDO0dBQ2Q7Q0FDRjs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JELFNBQVMsT0FBTyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUU7QUFDeEIsTUFBSSxXQUFXLEdBQUcsOEJBQThCLENBQUE7O0FBRWhELE1BQUksT0FBTyxHQUFHLElBQUksY0FBYyxFQUFFLENBQUM7QUFDbkMsU0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsV0FBVyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ3ZDLFNBQU8sQ0FBQyxNQUFNLEdBQUcsWUFBVztBQUMxQixRQUFJLE9BQU8sQ0FBQyxNQUFNLElBQUksR0FBRyxJQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsR0FBRyxFQUFFO0FBQ2pELFFBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO0tBQ3RDO0dBQ0YsQ0FBQztBQUNGLFNBQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztDQUNoQiIsImZpbGUiOiJzcmMvbWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBBUEkgPSBcImh0dHA6Ly9kZWNrb2ZjYXJkc2FwaS5jb20vYXBpL1wiLFxuICAkZGVhbGVyMSA9ICQoXCIuZGVhbGVyMVwiKSxcbiAgJGRlYWxlcjIgPSAkKFwiLmRlYWxlcjJcIiksXG4gICRkZWFsZXIzID0gJChcIi5kZWFsZXIzXCIpLFxuICAkZGVhbGVyNCA9ICQoXCIuZGVhbGVyNFwiKSxcbiAgJGRlYWxlcjUgPSAkKFwiLmRlYWxlcjVcIiksXG4gICRkZWFsZXI2ID0gJChcIi5kZWFsZXI2XCIpLFxuICAkZGVhbGVyNyA9ICQoXCIuZGVhbGVyN1wiKSxcbiAgJGRlYWxlcjggPSAkKFwiLmRlYWxlcjhcIiksXG4gICRkZWFsZXI5ID0gJChcIi5kZWFsZXI5XCIpLFxuICAkZGVhbGVyMTAgPSAkKFwiLmRlYWxlcjEwXCIpLFxuICAkZGVhbGVyMTEgPSAkKFwiLmRlYWxlcjExXCIpLFxuICAkcGxheWVyMSA9ICQoXCIucGxheWVyMVwiKSxcbiAgJHBsYXllcjIgPSAkKFwiLnBsYXllcjJcIiksXG4gICRwbGF5ZXIzID0gJChcIi5wbGF5ZXIzXCIpLFxuICAkcGxheWVyNCA9ICQoXCIucGxheWVyNFwiKSxcbiAgJHBsYXllcjUgPSAkKFwiLnBsYXllcjVcIiksXG4gICRwbGF5ZXI2ID0gJChcIi5wbGF5ZXI2XCIpLFxuICAkcGxheWVyNyA9ICQoXCIucGxheWVyN1wiKSxcbiAgJHBsYXllcjggPSAkKFwiLnBsYXllcjhcIiksXG4gICRwbGF5ZXI5ID0gJChcIi5wbGF5ZXI5XCIpLFxuICAkcGxheWVyMTAgPSAkKFwiLnBsYXllcjEwXCIpLFxuICAkcGxheWVyMTEgPSAkKFwiLnBsYXllcjExXCIpLFxuICBkZWNrSWQsXG4gICRnZXREZWNrID0gJChcIi5nZXREZWNrXCIpLFxuICAkZGVhbENhcmRzID0gJChcIi5kZWFsQ2FyZHNcIiksXG4gICRoaXQgPSAkKFwiLmhpdFwiKSxcbiAgJHN0YXkgPSAkKFwiLnN0YXlcIiksXG4gIGRlYWxlckhhbmQgPSBbXSxcbiAgcGxheWVySGFuZCA9IFtdO1xuXG52YXIgJGRlYWxlciA9ICQoXCIuZGVhbGVyXCIpO1xudmFyICRwbGF5ZXIgPSAkKFwiLnBsYXllclwiKTtcblxudmFyIGRlYWxlciA9IFtdO1xudmFyIHBsYXllciA9IFtdO1xudmFyICRkZWFsZXJDYXJkID0gJChcIi5kZWFsZXJDYXJkXCIpO1xudmFyICRwbGF5ZXJDYXJkID0gJChcIi5wbGF5ZXJDYXJkXCIpO1xuXG4kZ2V0RGVjay5jbGljayhzaXhEZWNrcyk7XG4kZGVhbENhcmRzLmNsaWNrKGRlYWxGb3VyKTtcbi8vJGhpdC5jbGljayhoaXQpO1xuXG5mdW5jdGlvbiBzaXhEZWNrcygpIHtcbiAgdmFyIHNodWZmbGVVUkwgPSBBUEkgKyBcInNodWZmbGUvP2RlY2tfY291bnQ9NlwiO1xuICBjb25zb2xlLmxvZyhcInNodWZmbGVVUkwgPSBcIiArIHNodWZmbGVVUkwpO1xuICBnZXRKU09OKHNodWZmbGVVUkwsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBkZWNrSWQgPSBkYXRhLmRlY2tfaWQ7XG4gICAgY29uc29sZS5sb2coZGVja0lkKTtcbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBkZWFsRm91cigpIHtcbiAgdmFyIGRyYXc0VVJMID0gQVBJICsgXCIvZHJhdy9cIiArIGRlY2tJZCArIFwiLz9jb3VudD00XCI7XG4gIGNvbnNvbGUubG9nKFwiZHJhdzRVUkwgPSBcIiArIGRyYXc0VVJMKTtcbiAgZ2V0SlNPTihkcmF3NFVSTCwgZnVuY3Rpb24oZGF0YSkge1xuICAgICRkZWFsZXIxLmF0dHIoXCJzcmNcIiwgXCJodHRwOi8vYmVoYW5jZS52by5sbG53ZC5uZXQvcHJvZmlsZXMvNTYxMTcvcHJvamVjdHMvNTc0MDA4OS9lODZhY2U2MGMwZDQ5MzFiZDNhODlhYmU1MGI0ZDI2Ny5qcGdcIik7XG4gICAgJHBsYXllcjEuYXR0cihcInNyY1wiLCBkYXRhLmNhcmRzWzFdLmltYWdlKTtcbiAgICAkZGVhbGVyMi5hdHRyKFwic3JjXCIsIGRhdGEuY2FyZHNbMl0uaW1hZ2UpO1xuICAgICRwbGF5ZXIyLmF0dHIoXCJzcmNcIiwgZGF0YS5jYXJkc1szXS5pbWFnZSk7XG4gICAgZGVhbGVySGFuZC5wdXNoKGRhdGEuY2FyZHNbMF0udmFsdWUgKyBcIiBcIiArIGRhdGEuY2FyZHNbMF0uc3VpdCk7XG4gICAgcGxheWVySGFuZC5wdXNoKGRhdGEuY2FyZHNbMV0udmFsdWUgKyBcIiBcIiArIGRhdGEuY2FyZHNbMV0uc3VpdCk7XG4gICAgZGVhbGVySGFuZC5wdXNoKGRhdGEuY2FyZHNbMl0udmFsdWUgKyBcIiBcIiArIGRhdGEuY2FyZHNbMl0uc3VpdCk7XG4gICAgcGxheWVySGFuZC5wdXNoKGRhdGEuY2FyZHNbM10udmFsdWUgKyBcIiBcIiArIGRhdGEuY2FyZHNbM10uc3VpdCk7XG4gIH0pO1xufVxuXG4vL2Z1bmN0aW9uIGhpdCgpIHtcbiAgLy92YXIgaGl0VVJMID0gQVBJICsgXCIvZHJhdy9cIiArIGRlY2tJZCArIFwiLz9jb3VudD0yXCI7XG4gIC8vZ2V0SlNPTihoaXRVUkwsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAvLy8vdmFyIHBsYXllckh0bWwgPSBcIiAgKFwic3JjXCIsIGRhdGEuY2FyZHNbMF0uaW1hZ2UpO1xuICAgIC8vJGRlYWxlcjMuYXR0cihcInNyY1wiLCBkYXRhLmNhcmRzWzFdLmltYWdlKTtcbiAgICAvL3BsYXllckhhbmQucHVzaChkYXRhLmNhcmRzWzBdLnZhbHVlICsgXCIgXCIgKyBkYXRhLmNhcmRzWzBdLnN1aXQpO1xuICAgIC8vZGVhbGVySGFuZC5wdXNoKGRhdGEuY2FyZHNbMV0udmFsdWUgKyBcIiBcIiArIGRhdGEuY2FyZHNbMV0uc3VpdCk7XG4gIC8vfSk7XG4vL31cblxuJGRlYWxlckNhcmQuY2xpY2soZGVhbGVyQ2FyZCk7XG4kcGxheWVyQ2FyZC5jbGljayhwbGF5ZXJDYXJkKTtcblxuZnVuY3Rpb24gZGVhbGVyQ2FyZCgpe1xuICB2YXIgY2FyZFVSTCA9IEFQSSArIFwiL2RyYXcvXCIgKyBkZWNrSWQgKyBcIi8/Y291bnQ9MVwiO1xuICBnZXRKU09OKGNhcmRVUkwsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICB2YXIgaHRtbCA9IFwiPGltZyBjbGFzcz0nY2FyZEltYWdlJyBzcmM9J1wiICsgZGF0YS5jYXJkc1swXS5pbWFnZSArIFwiJz5cIjtcbiAgICAkZGVhbGVyLmFwcGVuZChodG1sKTtcbiAgICBkZWFsZXJIYW5kLnB1c2goY29udmVydENhcmQoZGF0YS5jYXJkc1swXS52YWx1ZSkpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcGxheWVyQ2FyZCgpe1xuICB2YXIgY2FyZFVSTCA9IEFQSSArIFwiL2RyYXcvXCIgKyBkZWNrSWQgKyBcIi8/Y291bnQ9MVwiO1xuICBnZXRKU09OKGNhcmRVUkwsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICB2YXIgaHRtbCA9IFwiPGltZyBjbGFzcz0nY2FyZEltYWdlJyBzcmM9J1wiICsgZGF0YS5jYXJkc1swXS5pbWFnZSArIFwiJz5cIjtcbiAgICAkcGxheWVyLmFwcGVuZChodG1sKTtcbiAgICBwbGF5ZXJIYW5kLnB1c2goY29udmVydENhcmQoZGF0YS5jYXJkc1swXS52YWx1ZSkpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gY29udmVydENhcmQodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSBcIkFDRVwiKSB7XG4gICAgcmV0dXJuIDE7XG4gIH0gZWxzZSBpZiAoaXNOYU4odmFsdWUpKSB7XG4gICAgcmV0dXJuIDEwO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufVxuXG5cbi8vIGNvbW1lbnRlZCBvdXQgdW50aWwgaSBmaWd1cmUgb3V0IHBhc3NpbmcgZXZlbnQgaGFuZGxlcnMgZnVuY3Rpb25zIHdpdGggYXJndW1lbnRzXG4vL2Z1bmN0aW9uIGNhcmQocGVyc29uKXtcbiAgLy92YXIgY2FyZFVSTCA9IEFQSSArIFwiL2RyYXcvXCIgKyBkZWNrSWQgKyBcIi8/Y291bnQ9MVwiO1xuICAvL3ZhciAkcGVyc29uID0gKCBwZXJzb24gPT09ICdkZWFsZXInICkgPyAkKCcuZGVhbGVyJykgOiAkKCcucGxheWVyJyk7XG5cbiAgLy9nZXRKU09OKGNhcmRVUkwsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAvL3ZhciBodG1sID0gXCI8aW1nIGNsYXNzPSdjYXJkSW1hZ2UnIHNyYz0nXCIgKyBkYXRhLmNhcmRzWzBdLmltYWdlICsgXCInPlwiO1xuICAgIC8vJHBlcnNvbi5hcHBlbmQoaHRtbCk7XG4gICAgLy9bcGVyc29uXS5wdXNoKGRhdGEuY2FyZHNbMF0udmFsdWUpO1xuICAvL30pO1xuLy99XG5cbi8vIFNjb3R0J3MgY3Jvc3Mtb3JpZ2luIGZpeFxuZnVuY3Rpb24gZ2V0SlNPTih1cmwsIGNiKSB7XG4gIHZhciBKU09OUF9QUk9YWSA9ICdodHRwczovL2pzb25wLmFmZWxkLm1lLz91cmw9J1xuICAvLyBUSElTIFdJTEwgQUREIFRIRSBDUk9TUyBPUklHSU4gSEVBREVSU1xuICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICByZXF1ZXN0Lm9wZW4oJ0dFVCcsIEpTT05QX1BST1hZICsgdXJsKTtcbiAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAocmVxdWVzdC5zdGF0dXMgPj0gMjAwICYmIHJlcXVlc3Quc3RhdHVzIDwgNDAwKSB7XG4gICAgICBjYihKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KSk7XG4gICAgfVxuICB9O1xuICByZXF1ZXN0LnNlbmQoKTtcbn1cbiJdfQ==