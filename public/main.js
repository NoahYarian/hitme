"use strict";

var API = "http://deckofcardsapi.com/api/";

var deckId;

var $dealCards = $(".dealCards"),
    $hit = $(".hit"),
    $stay = $(".stay"),
    dealerHand = [],
    playerHand = [],
    $dealerCard = $(".dealerCard"),
    $playerCard = $(".playerCard");

var $dealer = $(".dealer");
var $player = $(".player");

$dealCards.click(deal);

//$hit.click(hit);

$dealerCard.click(dealerCard);
$playerCard.click(playerCard);

function dealerCard() {
  var cardURL = API + "draw/" + deckId + "/?count=1";
  getJSON(cardURL, function (data) {
    var html = "<img class='cardImage' src='" + data.cards[0].image + "'>";
    $dealer.append(html);
    dealerHand.push(convertCard(data.cards[0].value));
  });
}

function playerCard() {
  var cardURL = API + "draw/" + deckId + "/?count=1";
  getJSON(cardURL, function (data) {
    var html = "<img class='cardImage' src='" + data.cards[0].image + "'>";
    $player.append(html);
    playerHand.push(convertCard(data.cards[0].value));
  });
}

function convertCard(value) {
  if (value === "ACE") {
    return 1;
  } else if (isNaN(value)) {
    return 10;
  } else {
    return value;
  }
}

function deal() {
  var shuffleURL = API + "shuffle/?deck_count=6";
  console.log("shuffleURL = " + shuffleURL);
  getJSON(shuffleURL, function (data) {
    deckId = data.deck_id;
    console.log(deckId);
    dealerCard();
    playerCard();
    dealerCard();
    playerCard();
  });
  $(".cardImage").attr("id", function (arr) {
    return "div-id" + arr;
  });
}

// commented out until i figure out passing event handlers functions with arguments
//function card(person){
//var cardURL = API + "/draw/" + deckId + "/?count=1";
//var $person = ( person === 'dealer' ) ? $('.dealer') : $('.player');

//getJSON(cardURL, function(data) {
//var html = "<img class='cardImage' src='" + data.cards[0].image + "'>";
//$person.append(html);
//[person].push(data.cards[0].value);
//});
//}

// Scott's cross-origin fix
function getJSON(url, cb) {
  var JSONP_PROXY = "https://jsonp.afeld.me/?url=";
  // THIS WILL ADD THE CROSS ORIGIN HEADERS
  var request = new XMLHttpRequest();
  request.open("GET", JSONP_PROXY + url);
  request.onload = function () {
    if (request.status >= 200 && request.status < 400) {
      cb(JSON.parse(request.responseText));
    }
  };
  request.send();
}

//function sixDecks() {
//var shuffleURL = API + "shuffle/?deck_count=6";
//console.log("shuffleURL = " + shuffleURL);
//getJSON(shuffleURL, function(data) {
//deckId = data.deck_id;
//console.log(deckId);
//});
//};

//function dealFour() {
//var draw4URL = API + "draw/" + deckId + "/?count=4";
//console.log("draw4URL = " + draw4URL);
//getJSON(draw4URL, function(data) {
//$dealer1.attr("src", "http://behance.vo.llnwd.net/profiles/56117/projects/5740089/e86ace60c0d4931bd3a89abe50b4d267.jpg");
//$player1.attr("src", data.cards[1].image);
//$dealer2.attr("src", data.cards[2].image);
//$player2.attr("src", data.cards[3].image);
//dealerHand.push(data.cards[0].value + " " + data.cards[0].suit);
//playerHand.push(data.cards[1].value + " " + data.cards[1].suit);
//dealerHand.push(data.cards[2].value + " " + data.cards[2].suit);
//playerHand.push(data.cards[3].value + " " + data.cards[3].suit);
//});
//}

//function hit() {
//var hitURL = API + "/draw/" + deckId + "/?count=2";
//getJSON(hitURL, function(data) {
////var playerHtml = "  ("src", data.cards[0].image);
//$dealer3.attr("src", data.cards[1].image);
//playerHand.push(data.cards[0].value + " " + data.cards[0].suit);
//dealerHand.push(data.cards[1].value + " " + data.cards[1].suit);
//});
//}
//# sourceMappingURL=data:application/json;base64,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ZCxDQUFDLENBQUM7QUFDSCxHQUFDLENBQUUsWUFBWSxDQUFFLENBQ2hCLElBQUksQ0FBRSxJQUFJLEVBQUUsVUFBVSxHQUFHLEVBQUc7QUFDM0IsV0FBTyxRQUFRLEdBQUcsR0FBRyxDQUFDO0dBQ3ZCLENBQUMsQ0FBQztDQUNKOzs7Ozs7Ozs7Ozs7Ozs7QUFlRCxTQUFTLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFO0FBQ3hCLE1BQUksV0FBVyxHQUFHLDhCQUE4QixDQUFBOztBQUVoRCxNQUFJLE9BQU8sR0FBRyxJQUFJLGNBQWMsRUFBRSxDQUFDO0FBQ25DLFNBQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLFdBQVcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUN2QyxTQUFPLENBQUMsTUFBTSxHQUFHLFlBQVc7QUFDMUIsUUFBSSxPQUFPLENBQUMsTUFBTSxJQUFJLEdBQUcsSUFBSSxPQUFPLENBQUMsTUFBTSxHQUFHLEdBQUcsRUFBRTtBQUNqRCxRQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztLQUN0QztHQUNGLENBQUM7QUFDRixTQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7Q0FDaEI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEiLCJmaWxlIjoic3JjL21haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQVBJID0gXCJodHRwOi8vZGVja29mY2FyZHNhcGkuY29tL2FwaS9cIjtcblxudmFyIGRlY2tJZDtcblxudmFyICRkZWFsQ2FyZHMgPSAkKFwiLmRlYWxDYXJkc1wiKSxcbiAgJGhpdCA9ICQoXCIuaGl0XCIpLFxuICAkc3RheSA9ICQoXCIuc3RheVwiKSxcbiAgZGVhbGVySGFuZCA9IFtdLFxuICBwbGF5ZXJIYW5kID0gW10sXG4gICRkZWFsZXJDYXJkID0gJChcIi5kZWFsZXJDYXJkXCIpLFxuICAkcGxheWVyQ2FyZCA9ICQoXCIucGxheWVyQ2FyZFwiKTtcblxuXG52YXIgJGRlYWxlciA9ICQoXCIuZGVhbGVyXCIpO1xudmFyICRwbGF5ZXIgPSAkKFwiLnBsYXllclwiKTtcblxuXG4kZGVhbENhcmRzLmNsaWNrKGRlYWwpO1xuXG4vLyRoaXQuY2xpY2soaGl0KTtcblxuJGRlYWxlckNhcmQuY2xpY2soZGVhbGVyQ2FyZCk7XG4kcGxheWVyQ2FyZC5jbGljayhwbGF5ZXJDYXJkKTtcblxuZnVuY3Rpb24gZGVhbGVyQ2FyZCgpe1xuICB2YXIgY2FyZFVSTCA9IEFQSSArIFwiZHJhdy9cIiArIGRlY2tJZCArIFwiLz9jb3VudD0xXCI7XG4gIGdldEpTT04oY2FyZFVSTCwgZnVuY3Rpb24oZGF0YSkge1xuICAgIHZhciBodG1sID0gXCI8aW1nIGNsYXNzPSdjYXJkSW1hZ2UnIHNyYz0nXCIgKyBkYXRhLmNhcmRzWzBdLmltYWdlICsgXCInPlwiO1xuICAgICRkZWFsZXIuYXBwZW5kKGh0bWwpO1xuICAgIGRlYWxlckhhbmQucHVzaChjb252ZXJ0Q2FyZChkYXRhLmNhcmRzWzBdLnZhbHVlKSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBwbGF5ZXJDYXJkKCl7XG4gIHZhciBjYXJkVVJMID0gQVBJICsgXCJkcmF3L1wiICsgZGVja0lkICsgXCIvP2NvdW50PTFcIjtcbiAgZ2V0SlNPTihjYXJkVVJMLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgdmFyIGh0bWwgPSBcIjxpbWcgY2xhc3M9J2NhcmRJbWFnZScgc3JjPSdcIiArIGRhdGEuY2FyZHNbMF0uaW1hZ2UgKyBcIic+XCI7XG4gICAgJHBsYXllci5hcHBlbmQoaHRtbCk7XG4gICAgcGxheWVySGFuZC5wdXNoKGNvbnZlcnRDYXJkKGRhdGEuY2FyZHNbMF0udmFsdWUpKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRDYXJkKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gXCJBQ0VcIikge1xuICAgIHJldHVybiAxO1xuICB9IGVsc2UgaWYgKGlzTmFOKHZhbHVlKSkge1xuICAgIHJldHVybiAxMDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVhbCgpIHtcbiAgdmFyIHNodWZmbGVVUkwgPSBBUEkgKyBcInNodWZmbGUvP2RlY2tfY291bnQ9NlwiO1xuICBjb25zb2xlLmxvZyhcInNodWZmbGVVUkwgPSBcIiArIHNodWZmbGVVUkwpO1xuICBnZXRKU09OKHNodWZmbGVVUkwsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBkZWNrSWQgPSBkYXRhLmRlY2tfaWQ7XG4gICAgY29uc29sZS5sb2coZGVja0lkKTtcbiAgICBkZWFsZXJDYXJkKCk7XG4gICAgcGxheWVyQ2FyZCgpO1xuICAgIGRlYWxlckNhcmQoKTtcbiAgICBwbGF5ZXJDYXJkKCk7XG4gIH0pO1xuICAkKCBcIi5jYXJkSW1hZ2VcIiApXG4gIC5hdHRyKCBcImlkXCIsIGZ1bmN0aW9uKCBhcnIgKSB7XG4gICAgcmV0dXJuIFwiZGl2LWlkXCIgKyBhcnI7XG4gIH0pO1xufVxuXG4vLyBjb21tZW50ZWQgb3V0IHVudGlsIGkgZmlndXJlIG91dCBwYXNzaW5nIGV2ZW50IGhhbmRsZXJzIGZ1bmN0aW9ucyB3aXRoIGFyZ3VtZW50c1xuLy9mdW5jdGlvbiBjYXJkKHBlcnNvbil7XG4gIC8vdmFyIGNhcmRVUkwgPSBBUEkgKyBcIi9kcmF3L1wiICsgZGVja0lkICsgXCIvP2NvdW50PTFcIjtcbiAgLy92YXIgJHBlcnNvbiA9ICggcGVyc29uID09PSAnZGVhbGVyJyApID8gJCgnLmRlYWxlcicpIDogJCgnLnBsYXllcicpO1xuXG4gIC8vZ2V0SlNPTihjYXJkVVJMLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgLy92YXIgaHRtbCA9IFwiPGltZyBjbGFzcz0nY2FyZEltYWdlJyBzcmM9J1wiICsgZGF0YS5jYXJkc1swXS5pbWFnZSArIFwiJz5cIjtcbiAgICAvLyRwZXJzb24uYXBwZW5kKGh0bWwpO1xuICAgIC8vW3BlcnNvbl0ucHVzaChkYXRhLmNhcmRzWzBdLnZhbHVlKTtcbiAgLy99KTtcbi8vfVxuXG4vLyBTY290dCdzIGNyb3NzLW9yaWdpbiBmaXhcbmZ1bmN0aW9uIGdldEpTT04odXJsLCBjYikge1xuICB2YXIgSlNPTlBfUFJPWFkgPSAnaHR0cHM6Ly9qc29ucC5hZmVsZC5tZS8/dXJsPSdcbiAgLy8gVEhJUyBXSUxMIEFERCBUSEUgQ1JPU1MgT1JJR0lOIEhFQURFUlNcbiAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgcmVxdWVzdC5vcGVuKCdHRVQnLCBKU09OUF9QUk9YWSArIHVybCk7XG4gIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHJlcXVlc3Quc3RhdHVzID49IDIwMCAmJiByZXF1ZXN0LnN0YXR1cyA8IDQwMCkge1xuICAgICAgY2IoSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCkpO1xuICAgIH1cbiAgfTtcbiAgcmVxdWVzdC5zZW5kKCk7XG59XG5cblxuLy9mdW5jdGlvbiBzaXhEZWNrcygpIHtcbiAgLy92YXIgc2h1ZmZsZVVSTCA9IEFQSSArIFwic2h1ZmZsZS8/ZGVja19jb3VudD02XCI7XG4gIC8vY29uc29sZS5sb2coXCJzaHVmZmxlVVJMID0gXCIgKyBzaHVmZmxlVVJMKTtcbiAgLy9nZXRKU09OKHNodWZmbGVVUkwsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAvL2RlY2tJZCA9IGRhdGEuZGVja19pZDtcbiAgICAvL2NvbnNvbGUubG9nKGRlY2tJZCk7XG4gIC8vfSk7XG4vL307XG5cbi8vZnVuY3Rpb24gZGVhbEZvdXIoKSB7XG4gIC8vdmFyIGRyYXc0VVJMID0gQVBJICsgXCJkcmF3L1wiICsgZGVja0lkICsgXCIvP2NvdW50PTRcIjtcbiAgLy9jb25zb2xlLmxvZyhcImRyYXc0VVJMID0gXCIgKyBkcmF3NFVSTCk7XG4gIC8vZ2V0SlNPTihkcmF3NFVSTCwgZnVuY3Rpb24oZGF0YSkge1xuICAgIC8vJGRlYWxlcjEuYXR0cihcInNyY1wiLCBcImh0dHA6Ly9iZWhhbmNlLnZvLmxsbndkLm5ldC9wcm9maWxlcy81NjExNy9wcm9qZWN0cy81NzQwMDg5L2U4NmFjZTYwYzBkNDkzMWJkM2E4OWFiZTUwYjRkMjY3LmpwZ1wiKTtcbiAgICAvLyRwbGF5ZXIxLmF0dHIoXCJzcmNcIiwgZGF0YS5jYXJkc1sxXS5pbWFnZSk7XG4gICAgLy8kZGVhbGVyMi5hdHRyKFwic3JjXCIsIGRhdGEuY2FyZHNbMl0uaW1hZ2UpO1xuICAgIC8vJHBsYXllcjIuYXR0cihcInNyY1wiLCBkYXRhLmNhcmRzWzNdLmltYWdlKTtcbiAgICAvL2RlYWxlckhhbmQucHVzaChkYXRhLmNhcmRzWzBdLnZhbHVlICsgXCIgXCIgKyBkYXRhLmNhcmRzWzBdLnN1aXQpO1xuICAgIC8vcGxheWVySGFuZC5wdXNoKGRhdGEuY2FyZHNbMV0udmFsdWUgKyBcIiBcIiArIGRhdGEuY2FyZHNbMV0uc3VpdCk7XG4gICAgLy9kZWFsZXJIYW5kLnB1c2goZGF0YS5jYXJkc1syXS52YWx1ZSArIFwiIFwiICsgZGF0YS5jYXJkc1syXS5zdWl0KTtcbiAgICAvL3BsYXllckhhbmQucHVzaChkYXRhLmNhcmRzWzNdLnZhbHVlICsgXCIgXCIgKyBkYXRhLmNhcmRzWzNdLnN1aXQpO1xuICAvL30pO1xuLy99XG5cbi8vZnVuY3Rpb24gaGl0KCkge1xuICAvL3ZhciBoaXRVUkwgPSBBUEkgKyBcIi9kcmF3L1wiICsgZGVja0lkICsgXCIvP2NvdW50PTJcIjtcbiAgLy9nZXRKU09OKGhpdFVSTCwgZnVuY3Rpb24oZGF0YSkge1xuICAgIC8vLy92YXIgcGxheWVySHRtbCA9IFwiICAoXCJzcmNcIiwgZGF0YS5jYXJkc1swXS5pbWFnZSk7XG4gICAgLy8kZGVhbGVyMy5hdHRyKFwic3JjXCIsIGRhdGEuY2FyZHNbMV0uaW1hZ2UpO1xuICAgIC8vcGxheWVySGFuZC5wdXNoKGRhdGEuY2FyZHNbMF0udmFsdWUgKyBcIiBcIiArIGRhdGEuY2FyZHNbMF0uc3VpdCk7XG4gICAgLy9kZWFsZXJIYW5kLnB1c2goZGF0YS5jYXJkc1sxXS52YWx1ZSArIFwiIFwiICsgZGF0YS5jYXJkc1sxXS5zdWl0KTtcbiAgLy99KTtcbi8vfVxuXG4iXX0=